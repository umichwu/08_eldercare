<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡Œå‹•ç‰ˆè¨ºæ–·é é¢</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #f5f5f5;
        }
        .section {
            background: white;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .section h3 {
            margin-top: 0;
            color: #333;
        }
        .info {
            margin: 5px 0;
            padding: 5px;
            background: #f0f0f0;
        }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .warning { color: orange; font-weight: bold; }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>ğŸ“± è¡Œå‹•ç‰ˆè¨ºæ–·é é¢</h1>

    <div class="section">
        <h3>1. è£ç½®åµæ¸¬</h3>
        <div id="deviceInfo"></div>
    </div>

    <div class="section">
        <h3>2. CSS æª”æ¡ˆè¼‰å…¥</h3>
        <div id="cssInfo"></div>
    </div>

    <div class="section">
        <h3>3. Body Class</h3>
        <div id="bodyClass"></div>
    </div>

    <div class="section">
        <h3>4. æ¸¬è©¦æŒ‰éˆ•ä½ˆå±€</h3>
        <div style="max-width: 400px;">
            <div class="test-quick-actions" style="
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 6px;
                margin: 10px 0;
            ">
                <button style="padding: 10px 5px; font-size: 14px;">â˜€ï¸ å¤©æ°£</button>
                <button style="padding: 10px 5px; font-size: 14px;">ğŸ’Š ç”¨è—¥</button>
                <button style="padding: 10px 5px; font-size: 14px;">ğŸ˜„ ç¬‘è©±</button>
                <button style="padding: 10px 5px; font-size: 14px;">ğŸ¥ å¥åº·</button>
            </div>
            <p style="font-size: 12px; color: #666;">â†‘ å¦‚æœä¸Šé¢çš„æŒ‰éˆ•æ˜¯æ©«å‘ä¸€è¡Œå››å€‹ï¼Œè¡¨ç¤º CSS æ­£å¸¸</p>
        </div>
    </div>

    <div class="section">
        <h3>5. æ‰‹å‹•æ“ä½œ</h3>
        <button onclick="forceApplyMobileView()">å¼·åˆ¶å¥—ç”¨ mobile-view</button>
        <button onclick="window.location.reload()">é‡æ–°è¼‰å…¥</button>
    </div>

    <div class="section">
        <h3>6. Console è¨˜éŒ„</h3>
        <div id="consoleLog" style="max-height: 200px; overflow-y: auto; background: #000; color: #0f0; padding: 10px; font-size: 12px;"></div>
    </div>

    <script src="device-detector.js"></script>
    <link rel="stylesheet" href="mobile.css">

    <script>
        // æ“·å– console.log
        const originalLog = console.log;
        const consoleLogDiv = document.getElementById('consoleLog');
        console.log = function(...args) {
            originalLog.apply(console, args);
            const message = args.map(arg =>
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            consoleLogDiv.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${message}</div>`;
            consoleLogDiv.scrollTop = consoleLogDiv.scrollHeight;
        };

        // 1. è£ç½®åµæ¸¬
        function checkDevice() {
            const deviceInfo = document.getElementById('deviceInfo');

            if (typeof DeviceDetector === 'undefined') {
                deviceInfo.innerHTML = '<div class="error">âŒ DeviceDetector æœªè¼‰å…¥ï¼</div>';
                return;
            }

            const info = DeviceDetector.getDeviceInfo();
            deviceInfo.innerHTML = `
                <div class="info">isMobile: <strong>${info.isMobile}</strong></div>
                <div class="info">isTablet: <strong>${info.isTablet}</strong></div>
                <div class="info">deviceType: <strong>${info.deviceType}</strong></div>
                <div class="info">OS: <strong>${info.os}</strong></div>
                <div class="info">Browser: <strong>${info.browser.name} ${info.browser.version}</strong></div>
                <div class="info">Screen: <strong>${info.screenWidth}x${info.screenHeight}</strong></div>
                <div class="info">UserAgent: <small>${info.userAgent}</small></div>
            `;
        }

        // 2. CSS æª”æ¡ˆè¼‰å…¥
        function checkCSS() {
            const cssInfo = document.getElementById('cssInfo');
            const links = Array.from(document.querySelectorAll('link[rel="stylesheet"]'));

            const mobileCSS = links.find(link => link.href.includes('mobile.css'));
            const stylesCSS = links.find(link => link.href.includes('styles.css'));

            cssInfo.innerHTML = `
                <div class="info ${mobileCSS ? 'success' : 'error'}">
                    mobile.css: ${mobileCSS ? 'âœ… å·²è¼‰å…¥' : 'âŒ æœªè¼‰å…¥'}
                    ${mobileCSS ? `<br><small>${mobileCSS.href}</small>` : ''}
                </div>
                <div class="info ${stylesCSS ? 'success' : 'warning'}">
                    styles.css: ${stylesCSS ? 'âœ… å·²è¼‰å…¥' : 'âš ï¸ æœªè¼‰å…¥'}
                    ${stylesCSS ? `<br><small>${stylesCSS.href}</small>` : ''}
                </div>
            `;
        }

        // 3. Body Class
        function checkBodyClass() {
            const bodyClassDiv = document.getElementById('bodyClass');
            const classes = Array.from(document.body.classList);

            const hasMobileView = classes.includes('mobile-view');
            const hasTabletView = classes.includes('tablet-view');
            const hasDesktopView = classes.includes('desktop-view');

            bodyClassDiv.innerHTML = `
                <div class="info ${hasMobileView ? 'success' : 'error'}">
                    mobile-view: ${hasMobileView ? 'âœ… æœ‰' : 'âŒ æ²’æœ‰'}
                </div>
                <div class="info">
                    tablet-view: ${hasTabletView ? 'âœ… æœ‰' : 'âŒ æ²’æœ‰'}
                </div>
                <div class="info">
                    desktop-view: ${hasDesktopView ? 'âœ… æœ‰' : 'âŒ æ²’æœ‰'}
                </div>
                <div class="info">
                    æ‰€æœ‰ classes: <strong>${classes.join(', ') || '(ç„¡)'}</strong>
                </div>
            `;
        }

        // å¼·åˆ¶å¥—ç”¨ mobile-view
        function forceApplyMobileView() {
            document.body.classList.remove('tablet-view', 'desktop-view');
            document.body.classList.add('mobile-view');
            console.log('âœ… å·²å¼·åˆ¶å¥—ç”¨ mobile-view');
            checkBodyClass();
            alert('å·²å¥—ç”¨ mobile-viewï¼Œè«‹æª¢æŸ¥ä¸»æ‡‰ç”¨æ˜¯å¦æ”¹è®Š');
        }

        // åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ è¨ºæ–·é é¢è¼‰å…¥å®Œæˆ');

            // åŸ·è¡Œè£ç½®åµæ¸¬
            if (typeof initDeviceDetection !== 'undefined') {
                initDeviceDetection({
                    checkLINE: false,
                    autoRedirect: false,
                    loadMobileCSS: false,
                    logDeviceInfo: true
                });
            }

            // å»¶é²æª¢æŸ¥ï¼Œç¢ºä¿æ‰€æœ‰æ±è¥¿éƒ½è¼‰å…¥
            setTimeout(() => {
                checkDevice();
                checkCSS();
                checkBodyClass();
            }, 500);
        });

        // æ¯ç§’æ›´æ–° body classï¼ˆä»¥é˜²å‹•æ…‹è®ŠåŒ–ï¼‰
        setInterval(checkBodyClass, 1000);
    </script>
</body>
</html>
