# ğŸ¥ ElderCare Companion System - é•·è¼©é™ªä¼´ç³»çµ±

ä¸€å€‹å°ˆç‚ºè€å¹´äººè¨­è¨ˆçš„ AI é™ªä¼´èŠå¤©ç³»çµ±ï¼Œå…·å‚™å¤§å­—é«”ã€é«˜å°æ¯”ã€èªéŸ³äº’å‹•ç­‰å‹å–„åŠŸèƒ½ã€‚

## âœ¨ ä¸»è¦ç‰¹è‰²

### ğŸ¯ è€å¹´äººå‹å–„è¨­è¨ˆ
- **è¶…å¤§å­—é«”**ï¼šé è¨­ 24px å­—é«”ï¼Œæ˜“æ–¼é–±è®€
- **é«˜å°æ¯”è‰²å½©**ï¼šé»‘ç™½åˆ†æ˜ï¼Œæ¸›å°‘çœ¼ç›ç–²å‹
- **ç°¡æ½”ä»‹é¢**ï¼šå»é™¤è¤‡é›œåŠŸèƒ½ï¼Œå°ˆæ³¨æ ¸å¿ƒå°è©±
- **èªéŸ³äº’å‹•**ï¼šæ”¯æ´èªéŸ³è¼¸å…¥å’ŒèªéŸ³æ’­æ”¾å›æ‡‰

### ğŸ¤– æ™ºèƒ½å°è©±åŠŸèƒ½
- **AI é™ªä¼´**ï¼šä½¿ç”¨ OpenAI GPT-4o-mini æä¾›æº«æš–å°è©±
- **è‡ªå‹•ç¸½çµ**ï¼šæ¯ 20 å‰‡è¨Šæ¯è‡ªå‹•ç”¢ç”Ÿå°è©±æ‘˜è¦
- **å°è©±è¨˜æ†¶**ï¼šå®Œæ•´ä¿å­˜å°è©±æ­·å²
- **æƒ…å¢ƒæ„ŸçŸ¥**ï¼šç†è§£è€å¹´äººçš„éœ€æ±‚å’Œæƒ…ç·’

### ğŸ†˜ å®‰å…¨èˆ‡é—œæ‡·
- **SOS ç·Šæ€¥æŒ‰éˆ•**ï¼šä¸€éµé€šçŸ¥å®¶äºº
- **å¥åº·é—œæ³¨**ï¼šAI æœƒé—œæ³¨ä½¿ç”¨è€…æåˆ°çš„å¥åº·è­°é¡Œ
- **ç”¨è—¥æé†’**ï¼šï¼ˆè¦åŠƒä¸­ï¼‰å®šæ™‚ç”¨è—¥æé†’åŠŸèƒ½
- **å®¶äºº Dashboard**ï¼šï¼ˆè¦åŠƒä¸­ï¼‰è®“å®¶äººäº†è§£é•·è¼©ç‹€æ³

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### å¾Œç«¯æŠ€è¡“
- **Node.js + Express**ï¼šREST API æœå‹™
- **Supabase**ï¼šè³‡æ–™åº«å’Œä½¿ç”¨è€…èªè­‰
- **OpenAI API**ï¼šAI å°è©±å’Œç¸½çµç”Ÿæˆ
- **PostgreSQL**ï¼šé—œè¯å¼è³‡æ–™åº«

### å‰ç«¯æŠ€è¡“
- **ç´” HTML/CSS/JavaScript**ï¼šç„¡æ¡†æ¶ï¼Œè¼•é‡å¿«é€Ÿ
- **Web Speech API**ï¼šèªéŸ³è¾¨è­˜å’ŒèªéŸ³åˆæˆ
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼šæ”¯æ´æ¡Œæ©Ÿã€å¹³æ¿ã€æ‰‹æ©Ÿ

### è³‡æ–™åº«è¨­è¨ˆ
```
- conversationsï¼ˆå°è©±è¡¨ï¼‰
- messagesï¼ˆè¨Šæ¯è¡¨ï¼‰
- conversation_summariesï¼ˆå°è©±ç¸½çµè¡¨ï¼‰
- user_memoryï¼ˆä½¿ç”¨è€…è¨˜æ†¶è¡¨ï¼‰
- messages_attachmentsï¼ˆé™„ä»¶è¡¨ï¼‰
```

## ğŸ“¦ å®‰è£èªªæ˜

### 1. å‰ç½®éœ€æ±‚
- Node.js 18+
- npm æˆ– yarn
- Supabase å¸³è™Ÿ
- OpenAI API é‡‘é‘°ï¼ˆå¯é¸ï¼‰

### 2. Clone å°ˆæ¡ˆ
```bash
cd eldercare-app
```

### 3. è¨­å®šç’°å¢ƒè®Šæ•¸
```bash
# è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
cp .env.example .env

# ç·¨è¼¯ .env æª”æ¡ˆï¼Œå¡«å…¥æ‚¨çš„ Supabase å’Œ OpenAI è³‡è¨Š
```

å¿…è¦çš„ç’°å¢ƒè®Šæ•¸ï¼š
```env
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
# âš ï¸ æ³¨æ„ï¼šå·²å¾ SUPABASE_SERVICE_KEY æ”¹åç‚º SUPABASE_SERVICE_ROLE_KEY
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
OPENAI_API_KEY=sk-your-openai-key
```

> ğŸ“˜ **é‡è¦æ›´æ–°**ï¼šç’°å¢ƒè®Šæ•¸å·²çµ±ä¸€å‘½åï¼Œè©³è¦‹ [ç’°å¢ƒè®Šæ•¸çµ±ä¸€èªªæ˜](docs/ç’°å¢ƒè®Šæ•¸çµ±ä¸€èªªæ˜.md)

### 4. å®‰è£å¾Œç«¯ä¾è³´
```bash
cd backend
npm install
```

### 5. å•Ÿå‹•å¾Œç«¯æœå‹™
```bash
# é–‹ç™¼æ¨¡å¼ï¼ˆè‡ªå‹•é‡å•Ÿï¼‰
npm run dev

# æˆ–æ­£å¼æ¨¡å¼
npm start
```

å¾Œç«¯æœƒåœ¨ http://localhost:3000 å•Ÿå‹•

### 6. å•Ÿå‹•å‰ç«¯æœå‹™
é–‹å•Ÿæ–°çš„çµ‚ç«¯æ©Ÿè¦–çª—ï¼š
```bash
cd frontend/public

# ä½¿ç”¨ Python å•Ÿå‹•ç°¡å–® HTTP ä¼ºæœå™¨
python3 -m http.server 8080

# æˆ–ä½¿ç”¨å…¶ä»–æ–¹å¼
# npx serve .
# npx http-server .
```

å‰ç«¯æœƒåœ¨ http://localhost:8080 å•Ÿå‹•

### 7. æ¸¬è©¦è³‡æ–™åº«é€£æ¥
```bash
# åœ¨ç€è¦½å™¨æ‰“é–‹
http://localhost:3000/api/health
```

æ‡‰è©²æœƒçœ‹åˆ°ï¼š
```json
{
  "status": "healthy",
  "timestamp": "2025-10-21T...",
  "service": "ElderCare Backend API"
}
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å»ºç«‹æ¸¬è©¦ä½¿ç”¨è€…
åœ¨ Supabase Dashboard çš„ SQL Editor åŸ·è¡Œï¼š
```sql
-- å»ºç«‹æ¸¬è©¦ä½¿ç”¨è€…ï¼ˆä½¿ç”¨ Supabase Authï¼‰
INSERT INTO auth.users (
  id,
  email,
  encrypted_password,
  email_confirmed_at,
  created_at,
  updated_at
) VALUES (
  '00000000-0000-0000-0000-000000000001',
  'test@example.com',
  crypt('password123', gen_salt('bf')),
  NOW(),
  NOW(),
  NOW()
);
```

### é–‹å§‹ä½¿ç”¨
1. æ‰“é–‹ç€è¦½å™¨å‰å¾€ http://localhost:8080
2. é»é¸ã€Œæ–°å°è©±ã€é–‹å§‹èŠå¤©
3. è¼¸å…¥è¨Šæ¯æˆ–é»é¸å¿«æ·æŒ‰éˆ•
4. è©¦è©¦èªéŸ³è¼¸å…¥åŠŸèƒ½ï¼ˆéœ€è¦éº¥å…‹é¢¨æ¬Šé™ï¼‰
5. æ¯ 20 å‰‡è¨Šæ¯æœƒè‡ªå‹•ç”¢ç”Ÿç¸½çµ

## ğŸ“š API æ–‡ä»¶

### å°è©± API

#### å»ºç«‹æ–°å°è©±
```http
POST /api/conversations
Content-Type: application/json

{
  "userId": "uuid",
  "title": "æ–°å°è©±",
  "channel": "web"
}
```

#### å–å¾—å°è©±åˆ—è¡¨
```http
GET /api/conversations?userId={uuid}
```

#### å–å¾—å–®ä¸€å°è©±
```http
GET /api/conversations/{id}?userId={uuid}
```

### è¨Šæ¯ API

#### å–å¾—å°è©±è¨Šæ¯
```http
GET /api/conversations/{id}/messages?userId={uuid}
```

#### å‚³é€è¨Šæ¯ï¼ˆæœƒè‡ªå‹•è§¸ç™¼ AI å›æ‡‰ï¼‰
```http
POST /api/conversations/{id}/messages
Content-Type: application/json

{
  "userId": "uuid",
  "content": "ä½ å¥½"
}

å›æ‡‰ï¼š
{
  "userMessage": { ... },
  "assistantMessage": { ... }
}
```

### ç¸½çµ API

#### å–å¾—æœ€æ–°ç¸½çµ
```http
GET /api/conversations/{id}/summaries/latest?userId={uuid}
```

#### æ‰‹å‹•ç”¢ç”Ÿç¸½çµ
```http
POST /api/conversations/{id}/summaries
Content-Type: application/json

{
  "userId": "uuid"
}
```

## ğŸ¨ å®¢è£½åŒ–è¨­å®š

### èª¿æ•´å­—é«”å¤§å°
ç·¨è¼¯ `frontend/public/styles.css`ï¼š
```css
:root {
  --font-size-md: 28px;  /* é è¨­æ˜¯ 24px */
  --font-size-lg: 32px;
}
```

### èª¿æ•´è‡ªå‹•ç¸½çµé »ç‡
ç·¨è¼¯ `.env`ï¼š
```env
AUTO_SUMMARY_THRESHOLD=15  # é è¨­æ˜¯ 20
```

### æ›´æ› AI æ¨¡å‹
ç·¨è¼¯ `.env`ï¼š
```env
OPENAI_MODEL=gpt-4  # é è¨­æ˜¯ gpt-4o-mini
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¾Œç«¯ç„¡æ³•å•Ÿå‹•
1. æª¢æŸ¥ `.env` æª”æ¡ˆæ˜¯å¦å­˜åœ¨ä¸”è¨­å®šæ­£ç¢º
2. ç¢ºèª Node.js ç‰ˆæœ¬ >= 18
3. åŸ·è¡Œ `npm install` é‡æ–°å®‰è£ä¾è³´

### å‰ç«¯ç„¡æ³•é€£æ¥å¾Œç«¯
1. ç¢ºèªå¾Œç«¯æœå‹™å·²å•Ÿå‹•ï¼ˆhttp://localhost:3000ï¼‰
2. æª¢æŸ¥ `frontend/public/app.js` ä¸­çš„ `API_BASE_URL`
3. æª¢æŸ¥ç€è¦½å™¨ Console æ˜¯å¦æœ‰ CORS éŒ¯èª¤

### èªéŸ³åŠŸèƒ½ç„¡æ³•ä½¿ç”¨
1. ç¢ºèªä½¿ç”¨çš„æ˜¯ Chrome æˆ– Edge ç€è¦½å™¨
2. ç¢ºèªå·²æˆäºˆéº¥å…‹é¢¨æ¬Šé™
3. ç¢ºèªä½¿ç”¨ HTTPS æˆ– localhost

### AI ç„¡æ³•å›æ‡‰
1. æª¢æŸ¥ OpenAI API Key æ˜¯å¦æ­£ç¢º
2. æª¢æŸ¥ API é¡åº¦æ˜¯å¦è¶³å¤ 
3. æŸ¥çœ‹å¾Œç«¯ Console çš„éŒ¯èª¤è¨Šæ¯

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
eldercare-app/
â”œâ”€â”€ backend/                 # å¾Œç«¯æœå‹™
â”‚   â”œâ”€â”€ config/             # é…ç½®æª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ supabase.js    # Supabase é€£æ¥
â”‚   â”‚   â””â”€â”€ openai.js      # OpenAI è¨­å®š
â”‚   â”œâ”€â”€ services/           # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ conversationService.js
â”‚   â”‚   â”œâ”€â”€ messageService.js
â”‚   â”‚   â””â”€â”€ summaryService.js
â”‚   â”œâ”€â”€ routes/             # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ api.js
â”‚   â”œâ”€â”€ server.js           # ä¸»ç¨‹å¼
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/               # å‰ç«¯é é¢
â”‚   â””â”€â”€ public/
â”‚       â”œâ”€â”€ index.html     # ä¸»é é¢
â”‚       â”œâ”€â”€ styles.css     # æ¨£å¼è¡¨
â”‚       â””â”€â”€ app.js         # JavaScript
â”œâ”€â”€ docs/                  # æ–‡ä»¶
â”œâ”€â”€ .env                   # ç’°å¢ƒè®Šæ•¸ï¼ˆä¸æäº¤åˆ° Gitï¼‰
â”œâ”€â”€ .env.example           # ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## ğŸ›£ï¸ é–‹ç™¼è·¯ç·šåœ–

### å·²å®Œæˆ âœ…
- [x] Supabase è³‡æ–™åº«æ•´åˆ
- [x] OpenAI API æ•´åˆ
- [x] å°è©±ç®¡ç†åŠŸèƒ½
- [x] è¨Šæ¯æ”¶ç™¼åŠŸèƒ½
- [x] è‡ªå‹•ç¸½çµæ©Ÿåˆ¶
- [x] èªéŸ³è¼¸å…¥è¼¸å‡º
- [x] è€å¹´äººå‹å–„ UI

### é€²è¡Œä¸­ ğŸš§
- [ ] ä½¿ç”¨è€…èªè­‰ç³»çµ±
- [ ] SOS ç·Šæ€¥é€šçŸ¥åŠŸèƒ½ï¼ˆéœ€æ•´åˆç°¡è¨Š/Email APIï¼‰
- [ ] ç”¨è—¥æé†’åŠŸèƒ½

### è¦åŠƒä¸­ ğŸ“‹
- [ ] å®¶äºº Dashboard
- [ ] å¥åº·æ•¸æ“šè¨˜éŒ„
- [ ] åœ–ç‰‡/å½±ç‰‡åˆ†äº«åŠŸèƒ½
- [ ] é›¢ç·šæ”¯æ´
- [ ] è¡Œå‹•è£ç½® Appï¼ˆReact Nativeï¼‰

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ æˆæ¬Š

MIT License

## ğŸ‘¥ è¯çµ¡è³‡è¨Š

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œæ­¡è¿è¯çµ¡ï¼š
- Email: your-email@example.com
- GitHub: https://github.com/your-username

---

**ç”¨å¿ƒé™ªä¼´æ¯ä¸€ä½é•·è¼© â¤ï¸**
